<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: 'General Sans', sans-serif;
            margin: 0;
            padding: 0;
        }

        h1,
        h2,
        p,
        .button {
            margin-top: 10%;
        }

        .unique-navbar {
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
            z-index: 1000;
            font-size: 14px;
        }

        .unique-navbar.transparent {
            background-color: transparent;
            color: white;
        }

        .unique-navbar.solid {
            background-color: white;
            color: black;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .unique-navbar.fixed-transparent {
            background-color: transparent !important;
        }

        .unique-navbar a {
            color: inherit;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }

        .unique-navbar.solid a {
            color: black;
        }

        .unique-navbar-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
        }

        .unique-navbar-logo {
            margin-right: 20px;
            width: 4%;
        }

        .content {
            margin-top: 100px;
            padding: 20px;
            height: 2000px;
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
        }

        .burger-menu {
            display: none;
            flex-direction: column;
            cursor: pointer;
            margin-right: 10%;
            z-index: 1100;
        }

        .burger-menu div {
            width: 25px;
            height: 2px;
            background-color: rgb(255, 255, 255);
            margin: 4px;
            transition: 0.4s;
        }

        .burger-menu:hover div {
            background-color: rgb(255, 255, 255);
        }

        .burger-menu.active div:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .burger-menu.active div:nth-child(2) {
            opacity: 0;
        }

        .burger-menu.active div:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        .close-menu-icon {
            display: none;
            flex-direction: column;
            cursor: pointer;
            z-index: 1100;
        }

        .close-menu-icon div {
            width: 25px;
            height: 2px;
            background-color: black;
            margin: 4px;
            transition: 0.4s;
        }

        .close-menu-icon:hover div {
            background-color: gray;
        }

        .unique-navbar-content a:hover {
            color: gray !important;
        }

        @media (min-width: 1200px) {
            .unique-navbar-logo {
                margin-left: 7%;
            }
        }

        @media (max-width: 1050px) {
            .burger-menu {
                display: flex;
            }

            .unique-navbar-logo.hidden,
            .burger-menu.hidden {
                display: none;
            }

            .close-menu-icon {
                display: none;
            }

            .unique-navbar-content {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
                background-color: rgba(0, 0, 0, 0.8);
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                justify-content: center;
                z-index: 1000;
            }

            .unique-navbar-content.active {
                display: flex;
                justify-content: flex-start;
                padding-top: 100px;
            }

            .unique-navbar-content a {
                margin: -20px;
                color: white !important;
                font-size: 24px;
                text-transform: uppercase;
                transition: color 0.3s;
            }

            .unique-navbar-content a:hover {
                color: gray !important;
            }

            .burger-menu div {
                background-color: black;
            }

            .unique-navbar.solid .burger-menu div {
                background-color: black;
            }

            .unique-navbar.transparent .burger-menu div {
                background-color: white;
            }

            .unique-navbar-logo {
                width: 8%;
            }
        }

        .unique-navbar-logo {
            width: auto;
            height: 50px;
            margin-right: 20px;
            margin-left: 2%;
        }

        .hero {
            position: relative;
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            overflow: hidden;
        }

        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./mg2/fashionable-boutique-owner-measures-dress-black-white-studio-generated-by-ai.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.5;
            z-index: -1;
        }

        .hero h1 {
            font-size: 48px;
            margin: 0 0 20px;
            z-index: 1;
            color: #000000;
        }

        .hero .button {
            padding: 10px 20px;
            background-color: black;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
            z-index: 1;
        }

        .hero .button:hover {
            background-color: gray;
        }

        .section {
            padding: 50px 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .grid-wrapper {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .grid-item {
            flex: 1;
            margin: 10px;
            max-width: 300px;
        }

        .grid-item img {
            max-width: 100%;
            transition: transform 0.3s;
        }

        .grid-item img:hover {
            transform: scale(1.05);
        }

        .products-section {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .product-card {
            flex: 1;
            margin: 10px;
            max-width: 300px;
        }

        .product-card img {
            max-width: 100%;
            transition: transform 0.3s;
        }

        .product-card img:hover {
            transform: scale(1.05);
        }

        .button-container {
            margin-top: 20px;
        }

        .button-container .button {
            padding: 10px 20px;
            background-color: black;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .button-container .button:hover {
            background-color: gray;
        }

        .separator {
            height: 2px;
            background-color: #e1e4e8;
            margin: 50px 0;
        }

        .testimonials1_component {
            position: relative;
        }

        .testimonials1_content {
            background-color: #fff;
            border: 1px solid #e1e4e8;
            border-radius: 12px;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            min-height: 20rem;
            padding: 2rem;
            display: flex;
        }

        .block-top-wrap {
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 0;
            font-size: 1rem;
            line-height: 1.5;
            display: flex;
        }

        .testimonials1_client-wrapper {
            display: flex;
            align-items: center;
        }

        .testimonials1_client-details {
            margin-left: 1rem;
        }

        .testimonials1_client-image {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
        }

        .icone-plateform-review {
            width: 40px;
            margin-left: 0;
        }

        .footer {
            padding: 20px;
            background-color: #f1f1f1;
            text-align: center;
        }

        .footer-logo {
            height: 50px;
        }

        .footer-links,
        .social-links {
            margin: 20px 0;
        }

        .footer-links a,
        .social-links a {
            margin: 0 10px;
            text-decoration: none;
            color: black;
        }

        .footer-links a:hover,
        .social-links a:hover {
            color: gray;
        }

        .section-blog {
            padding: 50px 20px;
            text-align: center;
            background-color: #f9f9f9;
            color: #ffffff;
        }

        .section-blog .button-container {
            margin: 10%;
        }

        .section-blog h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .section-blog p {
            font-size: 30px;
            margin-bottom: 20px;
            width: 50%;
        }

        @media (max-width: 700px) {
            .testimonials1_component {
                flex-direction: column;
            }

            .testimonials1_arrow {
                top: auto;
                bottom: -3rem;
                transform: translateY(0);
            }

            .testimonials1_arrow.right {
                left: 3.5rem;
            }

            .testimonials1_arrow.left {
                left: 0;
            }
        }

        @media (max-width: 730px) {
            .grid-wrapper {
                flex-direction: column;
            }

            .products-section {
                flex-direction: column;
            }
        }

        p {
            width: 50%;
            margin: 0 auto;
            text-align: center;
        }

        .testimonials1_content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .block-top-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .block-profile-img,
        .block-date,
        .icone-plateform-review {
            margin-bottom: 10px;
        }

        .testimonials1_client-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }

        .testimonials1_client-details {
            text-align: center;
        }

        .avis {
            text-align: center;
        }

        h1 {
            margin-bottom: 20%;
        }

        .section-blog {
            background-image: url(./mg2/cute-woman-bright-hat-purple-blouse-is-leaning-stand-with-dresses-posing-with-package-isolated-background.jpg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }

        .section-blog::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Overlay with opacity */
            z-index: 1;
        }

        .section-blog h2,
        .section-blog p,
        .section-blog .button-container {
            position: relative;
            z-index: 2;
        }

        .edit-button {
            display: none;
            margin-top: 10px;
            background-color: black;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }

        .edit-button:hover {
            background-color: gray;
            transform: scale(1.05);
        }

        .admin .edit-button {
            display: inline-block;
        }

        .section-about {
            position: relative;
            padding: 50px 20px;
            text-align: center;
            color: #000000;
        }

        .section-about::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./mg2/female-friends-out-shopping-together.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.5;
            z-index: -1;
        }

        .section-about .button-container {
            margin-top: 10%;
            margin-bottom: 5%;
        }

        .section-about h2 {
            font-size: 3em;
        }

        .section-about p {
            font-size: 1.5em;
        }

        @media (max-width: 700px) {
            .section-blog h2 {
                font-size: 28px;
            }

            .section-blog p {
                font-size: 15px;
            }

            .section-about h2 {
                font-size: 28px;
            }

            .section-about p {
                font-size: 15px;
            }
        }

</style>
</head>
<body>
    <header class="unique-navbar transparent" id="unique-navbar">
        <a href="index.html">
            <img src="mg2/6681c1660d9613fbf3097b52_28a8288e-5e38-4119-805b-f6eb28d25c1b-p-130x130q80.webp" alt="Logo CMC Mode" class="unique-navbar-logo" id="navbar-logo">
        </a>
        <nav class="burger-menu" id="burger-menu">
            <div></div>
            <div></div>
            <div></div>
        </nav>
        <nav class="close-menu-icon" id="close-menu-icon">
            <div></div>
            <div></div>
            <div></div>
        </nav>
        <nav class="unique-navbar-content" id="unique-navbar-content">
            <a href="index.html" class="nav-link">ACCUEIL</a>
            <a href="shop.html" class="nav-link">PRODUITS</a>
            <a href="about.html" class="nav-link">À PROPOS</a>
            <a href="contact.html" class="nav-link">CONTACT</a>
            <a href="faq.html" class="nav-link">FAQ</a>
            <a href="blog.html" class="nav-link">BLOG</a>
            <a href="#" class="nav-link" onclick="logout()">DÉCONNEXION</a>
        </nav>
    </header>
    <section class="hero">
        <h1>Découvrez Nos Nouvelles Collections</h1>
        <a href="shop.html" class="button heroButton">Voir les Nouveautés</a>
        <button class="edit-button" onclick="editBackgroundImage('hero')">Modifier Image de Fond</button>
        <input type="file" id="upload-hero-bg" class="upload-input" style="display: none;" accept="image/*" onchange="uploadBackgroundImage(event, 'hero')">
    </section>
    <section class="section">
        <h2>Meilleures ventes</h2>
        <div class="grid-wrapper" id="bestsellers-grid">
            <div class="grid-item">
                <img id="product-1" src="/images/portrait-young-japanese-woman-with-jacket.jpg" alt="Portrait d'une jeune femme japonaise avec une veste">
                <button class="edit-button" onclick="editImage('product-1')">Modifier</button>
                <input type="file" id="upload-product-1" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-1')">
            </div>
            <div class="grid-item">
                <img id="product-2" src="images/17017.jpg" alt="Product 2">
                <button class="edit-button" onclick="editImage('product-2')">Modifier</button>
                <input type="file" id="upload-product-2" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-2')">
            </div>
            <div class="grid-item">
                <img id="product-3" src="images/17015.jpg" alt="Product 3">
                <button class="edit-button" onclick="editImage('product-3')">Modifier</button>
                <input type="file" id="upload-product-3" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-3')">
            </div>
        </div>
    </section>
    <section class="separator"></section>
    <section class="section">
        <h2>Nos Produits</h2>
        <p>Découvrez notre gamme de produits uniques et de haute qualité. Cliquez ci-dessous pour voir notre collection complète.</p>
        <div class="products-section">
            <div class="product-card">
                <img id="product-4" src="mg2/2149429029.jpg" alt="Product 4">
                <button class="edit-button" onclick="editImage('product-4')">Modifier</button>
                <input type="file" id="upload-product-4" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-4')">
            </div>
            <div class="product-card">
                <img id="product-5" src="mg2/28179.jpg" alt="Product 5">
                <button class="edit-button" onclick="editImage('product-5')">Modifier</button>
                <input type="file" id="upload-product-5" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-5')">
            </div>
            <div class="product-card">
                <img id="product-6" src="mg2/57034.jpg" alt="Product 6">
                <button class="edit-button" onclick="editImage('product-6')">Modifier</button>
                <input type="file" id="upload-product-6" class="upload-input" style="display: none;" accept="image/*" onchange="uploadImage(event, 'product-6')">
            </div>
        </div>
        <div class="button-container">
            <a href="shop.html" class="button">Voir plus</a>
        </div>
    </section>

    <section class="separator"></section>
    <section class="section section-about">
        <h2>À Propos de CMC MODE</h2>
        <p>Nous sommes là pour vous offrir une expérience de shopping unique et personnalisée. Découvrez nos valeurs ainsi que notre localisation.</p>
        <button class="edit-button" onclick="editBackgroundImage('about')">Modifier Image de Fond</button>
        <input type="file" id="upload-about-bg" class="upload-input" style="display: none;" accept="image/*" onchange="uploadBackgroundImage(event, 'about')">
        <div class="button-container">
            <a href="about.html" class="button">En savoir plus</a>
        </div>
    </section>
    <section class="separator"></section>
    <section class="section section-blog">
        <h2>Blog</h2>
        <p>Découvrez nos derniers articles de blog, des conseils mode aux dernières tendances.</p>
        <button class="edit-button" onclick="editBackgroundImage('blog')">Modifier Image de Fond</button>
        <input type="file" id="upload-blog-bg" class="upload-input" style="display: none;" accept="image/*" onchange="uploadBackgroundImage(event, 'blog')">
        <div class="button-container">
            <a href="blog.html" class="button">Accéder au Blog</a>
        </div>
    </section>
    <section class="separator"></section>
    <section class="section-testimonials1">
        <div class="page-padding">
            <div class="container-large">
                <div class="padding-vertical padding-large">
                    <div class="margin-bottom margin-large">
                        <h2 class="avis">Retrouvez nos avis.</h2>
                    </div>
                    <div class="testimonials1_component" id="testimonials-container">
                        <!-- Les avis seront insérés ici -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-wrapper">
            <a href="index.html"><img src="mg2/6681c1660d9613fbf3097b52_28a8288e-5e38-4119-805b-f6eb28d25c1b-p-130x130q80.webp" alt="CMC MODE" class="footer-logo"></a>
            <div class="footer-links">
                <a href="#">Politique de données</a>
            </div>
            <div class="social-links">
                <a href="#"><img src="images/facebook-icon.svg" alt="Facebook"></a>
            </div>
        </div>
        <p class="bFoot">&copy; 2024 CMC MODE. Tous droits réservés.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/get-reviews')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('testimonials-container');
                    data.reviews.forEach(review => {
                        const reviewElement = document.createElement('div');
                        reviewElement.classList.add('testimonials1_slide', 'w-slide');
                        reviewElement.innerHTML = `
                            <div class="testimonials1_content">
                                <div class="block-top-wrap">
                                    <img src="images/trustpilot-5-etoile-vert.png" loading="lazy" alt="5 étoiles trustpilot" class="block-profile-img">
                                    <div class="block-top-text-wrap">
                                        <div class="block-date">${new Date(review.createdAt).toLocaleDateString()}</div>
                                    </div>
                                    <img alt="Icone Trustpilot" loading="lazy" src="images/Logo-truspilot-1.png" class="icone-plateform-review">
                                </div>
                                <p>${review.text}</p>
                                <div class="testimonials1_client-wrapper">
                                    <div class="testimonials1_client-details">
                                        <div>${review.consumer.displayName}</div>
                                    </div>
                                </div>
                            </div>
                        `;
                        container.appendChild(reviewElement);
                    });
                })
                .catch(error => console.error('Erreur lors de la récupération des avis:', error));

            // Animation on scroll
            const sections = document.querySelectorAll('.section');
            const options = {
                threshold: 0.3
            };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, options);

            sections.forEach(section => {
                observer.observe(section);
            });

            // Handle burger menu
            const burgerMenu = document.getElementById('burger-menu');
            const navbarContent = document.getElementById('unique-navbar-content');
            const closeMenuIcon = document.getElementById('close-menu-icon');

            function toggleMenu() {
                const isActive = navbarContent.classList.contains('active');
                navbarContent.classList.toggle('active', !isActive);
                burgerMenu.classList.toggle('active', !isActive);
                closeMenuIcon.classList.toggle('active', !isActive);
            }

            burgerMenu.addEventListener('click', toggleMenu);
            closeMenuIcon.addEventListener('click', toggleMenu);

            // Ensure burger menu state is reset on resize
            window.addEventListener('resize', function () {
                if (window.innerWidth > 1050) {
                    navbarContent.classList.remove('active');
                    burgerMenu.classList.remove('active');
                    closeMenuIcon.classList.remove('active');
                }
            });

            // Charger les images de fond au chargement de la page
            fetch('/get-background-images')
                .then(response => response.json())
                .then(data => {
                    if (data.hero) {
                        document.querySelector('.hero').style.backgroundImage = `url(${data.hero})`;
                    }
                    if (data.about) {
                        document.querySelector('.section-about').style.backgroundImage = `url(${data.about})`;
                    }
                    if (data.blog) {
                        document.querySelector('.section-blog').style.backgroundImage = `url(${data.blog})`;
                    }
                })
                .catch(error => console.error('Erreur lors du chargement des images de fond:', error));

  
    // Charger les images de produit au chargement de la page
    const productIds = ['product-1', 'product-2', 'product-3', 'product-4', 'product-5', 'product-6'];
    productIds.forEach(id => {
        fetch(`/get-content/${id}`)
            .then(response => response.json())
            .then(data => {
                if (data.content) {
                    document.getElementById(id).src = data.content;
                }
            })
            .catch(error => console.error(`Erreur lors du chargement de l'image pour ${id}:`, error));
    });
});



        // Fonction pour activer le mode admin
        function enableAdminMode() {
            document.body.classList.add('admin');
        }

        // Fonction pour désactiver le mode admin
        function disableAdminMode() {
            document.body.classList.remove('admin');
        }

        // Fonction pour déconnexion
        function logout() {
            fetch('/logout', { method: 'POST' })
                .then(response => {
                    if (response.ok) {
                        disableAdminMode();
                        window.location.reload();
                    } else {
                        console.error('Failed to logout');
                    }
                });
        }

        // Fonction pour éditer l'image
        function editImage(productId) {
            const fileInput = document.getElementById(`upload-${productId}`);
            fileInput.click();
        }

      
// Fonction pour gérer l'upload de l'image
function uploadImage(event, productId) {
    const file = event.target.files[0];
    const formData = new FormData();
    formData.append('image', file);
    formData.append('id', productId);

    fetch('/upload-image', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.getElementById(productId).src = data.filePath;
            } else {
                alert('Échec du téléchargement de l\'image');
            }
        })
        .catch(error => console.error('Error:', error));
}

// Fonction pour gérer l'upload de l'image de fond
function uploadBackgroundImage(event, sectionId) {
    const file = event.target.files[0];
    const formData = new FormData();
    formData.append('image', file);
    formData.append('section', sectionId);

    fetch('/upload-background-image', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.querySelector(`.${sectionId}`).style.backgroundImage = `url(${data.filePath})`;
            } else {
                alert('Échec du téléchargement de l\'image');
            }
        })
        .catch(error => console.error('Error:', error));
}

        // Activer le mode admin (à appeler lors de la connexion de l'administrateur)
        enableAdminMode();
    </script>
</body>
</html>